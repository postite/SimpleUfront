<?php

// Generated by Haxe 3.3.0
class ufront_core_SurpriseTools {
	public function __construct(){}
	static function success() {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::success");
		$__hx__spos = $GLOBALS['%s']->length;
		if(ufront_core_SurpriseTools::$s === null) {
			$tmp = tink_core_Outcome::Success(tink_core_Noise::$Noise);
			ufront_core_SurpriseTools::$s = tink_core__Future_Future_Impl_::sync($tmp);
		}
		{
			$tmp = (isset(ufront_core_SurpriseTools::$s) ? ufront_core_SurpriseTools::$s: array("ufront_core_SurpriseTools", "s"));
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function s() { $args = func_get_args(); return call_user_func_array(self::$s, $args); }
	static $s;
	static function asSurprise($outcome) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::asSurprise");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = tink_core__Future_Future_Impl_::sync($outcome);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function asGoodSurprise($data) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::asGoodSurprise");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp = tink_core_Outcome::Success($data);
		{
			$tmp2 = tink_core__Future_Future_Impl_::sync($tmp);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}
		$GLOBALS['%s']->pop();
	}
	static function asBadSurprise($err) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::asBadSurprise");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp = tink_core_Outcome::Failure($err);
		{
			$tmp2 = tink_core__Future_Future_Impl_::sync($tmp);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}
		$GLOBALS['%s']->pop();
	}
	static function asSurpriseError($err, $msg = null, $p = null) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::asSurpriseError");
		$__hx__spos = $GLOBALS['%s']->length;
		if($msg === null) {
			$tmp = Std::string($err);
			$msg = "Failure: " . _hx_string_or_null($tmp);
		}
		$tmp1 = ufront_web_HttpError::wrap($err, $msg, $p);
		$tmp2 = tink_core_Outcome::Failure($tmp1);
		{
			$tmp = tink_core__Future_Future_Impl_::sync($tmp2);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function asSurpriseTypedError($err, $msg = null, $p = null) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::asSurpriseTypedError");
		$__hx__spos = $GLOBALS['%s']->length;
		if($msg === null) {
			$tmp = Std::string($err);
			$msg = "Failure: " . _hx_string_or_null($tmp);
		}
		$tmp1 = tink_core_Outcome::Failure(ufront_web_HttpError::wrap($err, $msg, $p));
		{
			$tmp = tink_core__Future_Future_Impl_::sync($tmp1);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function tryCatchSurprise($fn, $msg = null, $p = null) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::tryCatchSurprise");
		$__hx__spos = $GLOBALS['%s']->length;
		try {
			$tmp = call_user_func($fn);
			{
				$tmp2 = ufront_core_SurpriseTools::asGoodSurprise($tmp);
				$GLOBALS['%s']->pop();
				return $tmp2;
			}
		}catch(Exception $__hx__e) {
			$_ex_ = ($__hx__e instanceof HException) && $__hx__e->getCode() == null ? $__hx__e->e : $__hx__e;
			$e = $_ex_;
			{
				$GLOBALS['%e'] = (new _hx_array(array()));
				while($GLOBALS['%s']->length >= $__hx__spos) {
					$GLOBALS['%e']->unshift($GLOBALS['%s']->pop());
				}
				$GLOBALS['%s']->push($GLOBALS['%e'][0]);
				{
					$tmp = ufront_core_SurpriseTools::asSurpriseError($e, $msg, $p);
					$GLOBALS['%s']->pop();
					return $tmp;
				}
			}
		}
		$GLOBALS['%s']->pop();
	}
	static function changeSuccessTo($s, $newSuccessData) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeSuccessTo");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = tink_core__Future_Future_Impl_::map($s, array(new _hx_lambda(array(&$newSuccessData), "ufront_core_SurpriseTools_0"), 'execute'), null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function changeSuccessToNoise($s) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeSuccessToNoise");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = ufront_core_SurpriseTools::changeSuccessTo($s, tink_core_Noise::$Noise);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function changeFailureTo($s, $newFailureData) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeFailureTo");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = tink_core__Future_Future_Impl_::map($s, array(new _hx_lambda(array(&$newFailureData), "ufront_core_SurpriseTools_1"), 'execute'), null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function changeFailureToError($s, $msg = null, $p = null) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeFailureToError");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = tink_core__Future_Future_Impl_::map($s, array(new _hx_lambda(array(&$msg, &$p), "ufront_core_SurpriseTools_2"), 'execute'), null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	static function useFallback($s, $fallback) {
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::useFallback");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$tmp = tink_core__Future_Future_Impl_::map($s, array(new _hx_lambda(array(&$fallback), "ufront_core_SurpriseTools_3"), 'execute'), null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	function __toString() { return 'ufront.core.SurpriseTools'; }
}
function ufront_core_SurpriseTools_0(&$newSuccessData, $outcome) {
	{
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeSuccessTo@157");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp = $outcome->index;
		switch($tmp) {
		case 0:{
			$tmp2 = tink_core_Outcome::Success($newSuccessData);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}break;
		case 1:{
			$tmp2 = tink_core_Outcome::Failure(_hx_deref($outcome)->params[0]);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}break;
		}
		$GLOBALS['%s']->pop();
	}
}
function ufront_core_SurpriseTools_1(&$newFailureData, $outcome) {
	{
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeFailureTo@169");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp = $outcome->index;
		switch($tmp) {
		case 0:{
			$tmp2 = tink_core_Outcome::Success(_hx_deref($outcome)->params[0]);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}break;
		case 1:{
			$tmp2 = tink_core_Outcome::Failure($newFailureData);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}break;
		}
		$GLOBALS['%s']->pop();
	}
}
function ufront_core_SurpriseTools_2(&$msg, &$p, $outcome) {
	{
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::changeFailureToError@177");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp = $outcome->index;
		switch($tmp) {
		case 0:{
			$tmp2 = tink_core_Outcome::Success(_hx_deref($outcome)->params[0]);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}break;
		case 1:{
			$inner = _hx_deref($outcome)->params[0];
			if($msg === null) {
				$tmp1 = Std::string($inner);
				$msg = "Failure: " . _hx_string_or_null($tmp1);
			}
			$tmp2 = ufront_web_HttpError::wrap($inner, $msg, $p);
			{
				$tmp3 = tink_core_Outcome::Failure($tmp2);
				$GLOBALS['%s']->pop();
				return $tmp3;
			}
		}break;
		}
		$GLOBALS['%s']->pop();
	}
}
function ufront_core_SurpriseTools_3(&$fallback, $outcome) {
	{
		$GLOBALS['%s']->push("ufront.core.SurpriseTools::useFallback@188");
		$__hx__spos = $GLOBALS['%s']->length;
		switch($outcome->index) {
		case 0:{
			$tmp = _hx_deref($outcome)->params[0];
			$GLOBALS['%s']->pop();
			return $tmp;
		}break;
		case 1:{
			$GLOBALS['%s']->pop();
			return $fallback;
		}break;
		}
		$GLOBALS['%s']->pop();
	}
}
