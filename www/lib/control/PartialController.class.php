<?php

// Generated by Haxe 3.3.0
class control_PartialController extends ufront_web_Controller {
	public function __construct() {
		if(!php_Boot::$skip_constructor) {
		$GLOBALS['%s']->push("control.PartialController::new");
		$__hx__spos = $GLOBALS['%s']->length;
		parent::__construct();
		$GLOBALS['%s']->pop();
	}}
	public $testApi;
	public $synctestApi;
	public function init() {
		$GLOBALS['%s']->push("control.PartialController::init");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$value = ufront_web_result_TemplateSource::TFromEngine("partial/part.html", null);
			ufront_web_result_ViewResult::$globalPartials->set("glob", $value);
		}
		$tmp = $this->renderMenu();
		ufront_view__TemplateData_TemplateData_Impl_::set(ufront_web_result_ViewResult::$globalValues, "menudata", $tmp);
		$tmp1 = $this->renderAsyncMenu();
		ufront_view__TemplateData_TemplateData_Impl_::set(ufront_web_result_ViewResult::$globalValues, "menuasyncdata", $tmp1);
		$tmp2 = $this->rendersyncMenu();
		ufront_view__TemplateData_TemplateData_Impl_::set(ufront_web_result_ViewResult::$globalValues, "menusyncdata", $tmp2);
		$GLOBALS['%s']->pop();
	}
	public function simple() {
		$GLOBALS['%s']->push("control.PartialController::simple");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		{
			$tmp = _hx_deref(new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "simple partial"))), "index", null))->addPartial("bout", "partial/part.html", null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function simpleStringPartial() {
		$GLOBALS['%s']->push("control.PartialController::simpleStringPartial");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		$tmp = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "simple partial"))), "addon", null);
		$tmp1 = ufront_view_TemplatingEngines::get_erazor();
		{
			$tmp2 = $tmp->addPartialString("addon", "<div>hello partial string</div>", $tmp1);
			$GLOBALS['%s']->pop();
			return $tmp2;
		}
		$GLOBALS['%s']->pop();
	}
	public function simpleparts() {
		$GLOBALS['%s']->push("control.PartialController::simpleparts");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		$res = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "partial"))), "addon", null);
		$_g = new haxe_ds_StringMap();
		$_g->set("addon", "partial/part.html");
		$tmp = ufront_view_TemplatingEngines::get_haxe();
		$res->addPartials($_g, $tmp);
		{
			$GLOBALS['%s']->pop();
			return $res;
		}
		$GLOBALS['%s']->pop();
	}
	public function glob() {
		$GLOBALS['%s']->push("control.PartialController::glob");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$value = ufront_web_result_TemplateSource::TFromEngine("partial/part.html", null);
			ufront_web_result_ViewResult::$globalPartials->set("addon", $value);
		}
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		{
			$tmp = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "partial"))), "addon", null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function globinit() {
		$GLOBALS['%s']->push("control.PartialController::globinit");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		{
			$tmp = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "partial"))), "global", null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function initedValues() {
		$GLOBALS['%s']->push("control.PartialController::initedValues");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		{
			$tmp = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "partial"))), "globalValues", null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function initedsyncValues() {
		$GLOBALS['%s']->push("control.PartialController::initedsyncValues");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		{
			$tmp = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "partial"))), "globalsyncValues", null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function initedAsyncValues() {
		$GLOBALS['%s']->push("control.PartialController::initedAsyncValues");
		$__hx__spos = $GLOBALS['%s']->length;
		$obj = _hx_anonymous(array());
		$this1 = null;
		if($obj !== null) {
			$this1 = $obj;
		} else {
			$this1 = _hx_anonymous(array());
		}
		{
			$tmp = new ufront_web_result_ViewResult(ufront_view__TemplateData_TemplateData_Impl_::setObject($this1, _hx_anonymous(array("title" => "partial"))), "globalAsyncValues", null);
			$GLOBALS['%s']->pop();
			return $tmp;
		}
		$GLOBALS['%s']->pop();
	}
	public function renderMenu() {
		$GLOBALS['%s']->push("control.PartialController::renderMenu");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$GLOBALS['%s']->pop();
			return "menu data";
		}
		$GLOBALS['%s']->pop();
	}
	public function renderAsyncMenu() {
		$GLOBALS['%s']->push("control.PartialController::renderAsyncMenu");
		$__hx__spos = $GLOBALS['%s']->length;
		$_gthis = $this;
		{
			$pos = _hx_anonymous(array("fileName" => "PartialController.hx", "lineNumber" => 98, "className" => "control.PartialController", "methodName" => "renderAsyncMenu"));
			if($this->context !== null) {
				$this->context->messages->push(_hx_anonymous(array("msg" => "do aync", "pos" => $pos, "type" => ufront_log_MessageType::$MTrace)));
			} else {
				haxe_Log::trace("do aync", $pos);
			}
		}
		$tmp = $this->testApi->gimmeJson();
		$futureViewResult = tink_core__Future_Future_Impl_::map($tmp, array(new _hx_lambda(array(&$_gthis), "control_PartialController_0"), 'execute'), null);
		{
			$GLOBALS['%s']->pop();
			return $futureViewResult;
		}
		$GLOBALS['%s']->pop();
	}
	public function rendersyncMenu() {
		$GLOBALS['%s']->push("control.PartialController::rendersyncMenu");
		$__hx__spos = $GLOBALS['%s']->length;
		{
			$pos = _hx_anonymous(array("fileName" => "PartialController.hx", "lineNumber" => 117, "className" => "control.PartialController", "methodName" => "rendersyncMenu"));
			if($this->context !== null) {
				$this->context->messages->push(_hx_anonymous(array("msg" => "do sync", "pos" => $pos, "type" => ufront_log_MessageType::$MTrace)));
			} else {
				haxe_Log::trace("do sync", $pos);
			}
		}
		$data = $this->synctestApi->gimmeJson();
		$menu = haxe_Json::phpJsonDecode($data);
		{
			$GLOBALS['%s']->pop();
			return $menu;
		}
		$GLOBALS['%s']->pop();
	}
	public function execute() {
		$GLOBALS['%s']->push("control.PartialController::execute");
		$__hx__spos = $GLOBALS['%s']->length;
		$uriParts = $this->context->actionContext->get_uriParts();
		$this->context->request->get_params();
		$this->context->request->get_httpMethod();
		$this->context->actionContext->controller = $this;
		$this->context->actionContext->action = "execute";
		try {
			$tmp = 0 === $uriParts->length;
			if($tmp) {
				$this->context->actionContext->action = "simple";
				$this->context->actionContext->args = (new _hx_array(array()));
				$this->context->actionContext->get_uriParts()->splice(0, 0);
				$i = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->simple->wrapResult[0];
				$wrappingRequired = $i;
				$tmp1 = $this->simple();
				$result = $this->wrapResult($tmp1, $wrappingRequired);
				$this->setContextActionResultWhenFinished($result);
				{
					$GLOBALS['%s']->pop();
					return $result;
				}
			} else {
				$tmp2 = null;
				if(1 === $uriParts->length) {
					$tmp2 = $uriParts[0] === "string";
				} else {
					$tmp2 = false;
				}
				if($tmp2) {
					$this->context->actionContext->action = "simpleStringPartial";
					$this->context->actionContext->args = (new _hx_array(array()));
					$this->context->actionContext->get_uriParts()->splice(0, 1);
					$i1 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->simpleStringPartial->wrapResult[0];
					$wrappingRequired1 = $i1;
					$tmp3 = $this->simpleStringPartial();
					$result1 = $this->wrapResult($tmp3, $wrappingRequired1);
					$this->setContextActionResultWhenFinished($result1);
					{
						$GLOBALS['%s']->pop();
						return $result1;
					}
				} else {
					$tmp4 = null;
					if(1 === $uriParts->length) {
						$tmp4 = $uriParts[0] === "parts";
					} else {
						$tmp4 = false;
					}
					if($tmp4) {
						$this->context->actionContext->action = "simpleparts";
						$this->context->actionContext->args = (new _hx_array(array()));
						$this->context->actionContext->get_uriParts()->splice(0, 1);
						$i2 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->simpleparts->wrapResult[0];
						$wrappingRequired2 = $i2;
						$tmp5 = $this->simpleparts();
						$result2 = $this->wrapResult($tmp5, $wrappingRequired2);
						$this->setContextActionResultWhenFinished($result2);
						{
							$GLOBALS['%s']->pop();
							return $result2;
						}
					} else {
						$tmp6 = null;
						if(1 === $uriParts->length) {
							$tmp6 = $uriParts[0] === "global";
						} else {
							$tmp6 = false;
						}
						if($tmp6) {
							$this->context->actionContext->action = "glob";
							$this->context->actionContext->args = (new _hx_array(array()));
							$this->context->actionContext->get_uriParts()->splice(0, 1);
							$i3 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->glob->wrapResult[0];
							$wrappingRequired3 = $i3;
							$tmp7 = $this->glob();
							$result3 = $this->wrapResult($tmp7, $wrappingRequired3);
							$this->setContextActionResultWhenFinished($result3);
							{
								$GLOBALS['%s']->pop();
								return $result3;
							}
						} else {
							$tmp8 = null;
							if(1 === $uriParts->length) {
								$tmp8 = $uriParts[0] === "globalinited";
							} else {
								$tmp8 = false;
							}
							if($tmp8) {
								$this->context->actionContext->action = "globinit";
								$this->context->actionContext->args = (new _hx_array(array()));
								$this->context->actionContext->get_uriParts()->splice(0, 1);
								$i4 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->globinit->wrapResult[0];
								$wrappingRequired4 = $i4;
								$tmp9 = $this->globinit();
								$result4 = $this->wrapResult($tmp9, $wrappingRequired4);
								$this->setContextActionResultWhenFinished($result4);
								{
									$GLOBALS['%s']->pop();
									return $result4;
								}
							} else {
								$tmp10 = null;
								if(1 === $uriParts->length) {
									$tmp10 = $uriParts[0] === "initedValues";
								} else {
									$tmp10 = false;
								}
								if($tmp10) {
									$this->context->actionContext->action = "initedValues";
									$this->context->actionContext->args = (new _hx_array(array()));
									$this->context->actionContext->get_uriParts()->splice(0, 1);
									$i5 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->initedValues->wrapResult[0];
									$wrappingRequired5 = $i5;
									$tmp11 = $this->initedValues();
									$result5 = $this->wrapResult($tmp11, $wrappingRequired5);
									$this->setContextActionResultWhenFinished($result5);
									{
										$GLOBALS['%s']->pop();
										return $result5;
									}
								} else {
									$tmp12 = null;
									if(1 === $uriParts->length) {
										$tmp12 = $uriParts[0] === "initedsyncValues";
									} else {
										$tmp12 = false;
									}
									if($tmp12) {
										$this->context->actionContext->action = "initedsyncValues";
										$this->context->actionContext->args = (new _hx_array(array()));
										$this->context->actionContext->get_uriParts()->splice(0, 1);
										$i6 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->initedsyncValues->wrapResult[0];
										$wrappingRequired6 = $i6;
										$tmp13 = $this->initedsyncValues();
										$result6 = $this->wrapResult($tmp13, $wrappingRequired6);
										$this->setContextActionResultWhenFinished($result6);
										{
											$GLOBALS['%s']->pop();
											return $result6;
										}
									} else {
										$tmp14 = null;
										if(1 === $uriParts->length) {
											$tmp14 = $uriParts[0] === "initedasyncValues";
										} else {
											$tmp14 = false;
										}
										if($tmp14) {
											$this->context->actionContext->action = "initedAsyncValues";
											$this->context->actionContext->args = (new _hx_array(array()));
											$this->context->actionContext->get_uriParts()->splice(0, 1);
											$i7 = haxe_rtti_Meta::getFields(_hx_qtype("control.PartialController"))->initedAsyncValues->wrapResult[0];
											$wrappingRequired7 = $i7;
											$tmp15 = $this->initedAsyncValues();
											$result7 = $this->wrapResult($tmp15, $wrappingRequired7);
											$this->setContextActionResultWhenFinished($result7);
											{
												$GLOBALS['%s']->pop();
												return $result7;
											}
										}
									}
								}
							}
						}
					}
				}
			}
			throw new HException(ufront_web_HttpError::pageNotFound(_hx_anonymous(array("fileName" => "PartialController.hx", "lineNumber" => 11, "className" => "control.PartialController", "methodName" => "execute"))));
		}catch(Exception $__hx__e) {
			$_ex_ = ($__hx__e instanceof HException) && $__hx__e->getCode() == null ? $__hx__e->e : $__hx__e;
			$e = $_ex_;
			{
				$GLOBALS['%e'] = (new _hx_array(array()));
				while($GLOBALS['%s']->length >= $__hx__spos) {
					$GLOBALS['%e']->unshift($GLOBALS['%s']->pop());
				}
				$GLOBALS['%s']->push($GLOBALS['%e'][0]);
				$tmp16 = Std::string($this->context->actionContext->controller);
				{
					$tmp = ufront_core_SurpriseTools::asSurpriseError($e, "Uncaught error while executing " . _hx_string_or_null($tmp16) . "." . _hx_string_or_null($this->context->actionContext->action) . "()", _hx_anonymous(array("fileName" => "PartialController.hx", "lineNumber" => 11, "className" => "control.PartialController", "methodName" => "execute")));
					$GLOBALS['%s']->pop();
					return $tmp;
				}
			}
		}
		$GLOBALS['%s']->pop();
	}
	public function __call($m, $a) {
		if(isset($this->$m) && is_callable($this->$m))
			return call_user_func_array($this->$m, $a);
		else if(isset($this->__dynamics[$m]) && is_callable($this->__dynamics[$m]))
			return call_user_func_array($this->__dynamics[$m], $a);
		else if('toString' == $m)
			return $this->__toString();
		else
			throw new HException('Unable to call <'.$m.'>');
	}
	static function __meta__() { $args = func_get_args(); return call_user_func_array(self::$__meta__, $args); }
	static $__meta__;
	function __toString() { return 'control.PartialController'; }
}
control_PartialController::$__meta__ = _hx_anonymous(array("obj" => _hx_anonymous(array("rtti" => (new _hx_array(array((new _hx_array(array("testApi", "AsyncTestApi", ""))), (new _hx_array(array("synctestApi", "TestApi", ""))), (new _hx_array(array("init", "1")))))), "viewFolder" => (new _hx_array(array("partial"))))), "fields" => _hx_anonymous(array("simple" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "simpleStringPartial" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "simpleparts" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "glob" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "globinit" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "initedValues" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "initedsyncValues" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3))))), "initedAsyncValues" => _hx_anonymous(array("wrapResult" => (new _hx_array(array(3)))))))));
function control_PartialController_0(&$_gthis, $outcome) {
	{
		$GLOBALS['%s']->push("control.PartialController::renderAsyncMenu@99");
		$__hx__spos = $GLOBALS['%s']->length;
		$tmp1 = $outcome->index;
		switch($tmp1) {
		case 0:{
			$json = haxe_Json::phpJsonDecode(_hx_deref($outcome)->params[0]);
			{
				$pos1 = _hx_anonymous(array("fileName" => "PartialController.hx", "lineNumber" => 103, "className" => "control.PartialController", "methodName" => "renderAsyncMenu"));
				if($_gthis->context !== null) {
					$_gthis->context->messages->push(_hx_anonymous(array("msg" => $json, "pos" => $pos1, "type" => ufront_log_MessageType::$MTrace)));
				} else {
					$tmp2 = Std::string($json);
					haxe_Log::trace("" . _hx_string_or_null($tmp2), $pos1);
				}
			}
			{
				$GLOBALS['%s']->pop();
				return $json;
			}
		}break;
		case 1:{
			$err = _hx_deref($outcome)->params[0];
			{
				$pos2 = _hx_anonymous(array("fileName" => "PartialController.hx", "lineNumber" => 106, "className" => "control.PartialController", "methodName" => "renderAsyncMenu"));
				if($_gthis->context !== null) {
					$_gthis->context->messages->push(_hx_anonymous(array("msg" => $err, "pos" => $pos2, "type" => ufront_log_MessageType::$MTrace)));
				} else {
					$tmp3 = Std::string($err);
					haxe_Log::trace("" . _hx_string_or_null($tmp3), $pos2);
				}
			}
			{
				$GLOBALS['%s']->pop();
				return "paf";
			}
		}break;
		}
		$GLOBALS['%s']->pop();
	}
}
